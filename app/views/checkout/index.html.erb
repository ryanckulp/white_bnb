<%= render partial: "shared/heading", locals: { title: 'Checkout', description: "Provide payment details to complete your booking." } %>

<section class="max-w-3xl mt-6 sm:mt-12 mx-auto space-y-4">
  <div class="mb-6">
    <label for="email" class="block" style="margin-bottom: 0.25rem; font-size: 0.93rem; color: #30313d;">Email</label>
    <input type="hidden" name="csrf-token" value="<%= form_authenticity_token %>">
    <input type="email" required="true" name="user[email]" id="user_email" class="block w-full border-0 p-0 text-gray-900 placeholder-gray-500 focus:ring-0 sm:text-sm" style="padding: 1rem; background: #f1f1f1; border-radius: 14px" value="<%= current_user.email %>" placeholder="monk@gmail.com">
    <p id="email_error" class="hidden" style="color: #df1b41; margin-top: 0.25rem; font-size: 0.93rem;">Email must be valid.</p>
  </div>

  <div id="payment-element" class="">
    <!-- Stripe will insert the payment form here -->
  </div>

  <div class="text-right">
    <button id="submit" class="bg-blue-500 px-4 py-2 text-white text-lg rounded-md" onclick="submit()">Pay <span id="amount"></span> Now</button>

    <button id="submit_loading" class="hidden bg-blue-500 px-4 py-2 text-white text-lg rounded-md">
      <div class="inline">
        Loading
      </div>
      <div id="spinner" class="inline"></div>
    </button>

    <span id="summary" class="hidden block"><span id="nights"></span> <span id="addon_fees"></span></span>
  </div>
</section>

<%= render "stripe_js" %>
